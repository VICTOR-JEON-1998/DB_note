### Plan cache

<img width="1157" height="729" alt="image" src="https://github.com/user-attachments/assets/f73865c7-1ddc-4c07-b32b-62f12370a88a" />


```sql
SELECT
	*
  FROM
	MONITOR.dbo.DBA_SESSIONS_DETAIL
```

위 쿼리를 통해 현재 실행중인 세션들의 세부 정보를 볼 수 있는데

SQL_HANDLE, STATEMENT_SQL_HANDLE, PLAN_HANDLE 이라는 값도 확인할 수 있다.

SQL_HANDLE :  PROCEDURE 정보

STATEMENT_SQL_HANDLE : PROCEDURE 안에서 실행되는 SQL 쿼리 정보

PLAN_HANDLE : 플랜캐시이다. 실행계획 정보가 들어가있다.

잘 돌아가던 기능이 갑자기 ELAPSED_SEC이 너무 커지거나 할 경우, PLAM_HANDLE 값을 삭제해주면 된다.

보통 이런 경우는  이상 파라미터 값이 실행계획을 잡았거나, 파라미터 값이 변동이 생겨서 기존의 플랜캐시/실행계획에 최적화 되지 않은 경우이기 때문에 실행계획을 초기화 시켜주면 된다.

추가로, OPTION(RECOMPILE) 이라는 기능도 활용할 수 있는데 이는 매번 실행 계획을 새로 만들게 되어서 
이상 파라미터값으로 인해 성능 이슈 발생을 예방한다.  

실행 계획 : 쿼리 옵티마이저가 SQL 쿼리를 가장 효율적으로 실행하기 위해 세운 단계별 절차.

플랜 캐시 : 실행 계획을 재사용하기 위해 메모리에 저장해두는 공간
